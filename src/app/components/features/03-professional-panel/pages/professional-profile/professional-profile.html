<div class="profile-wrapper" *ngIf="!loading; else loadingTpl">

  <div class="profile-header">
    <div class="avatar-circle">
      {{ avatarLetter }}
    </div>
    <div>
      <h2>Mi perfil profesional</h2>
      <p class="subtitle">
        Aquí puedes revisar y actualizar tus datos como profesional en Mente Activa.
      </p>
    </div>
  </div>

  <form [formGroup]="form" (ngSubmit)="guardar()">

    <div class="profile-grid">

      <mat-form-field appearance="outline">
        <mat-label>Nombres</mat-label>
        <input matInput formControlName="name">
        <mat-error *ngIf="form.get('name')?.hasError('required')">
          El nombre es obligatorio
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Apellidos</mat-label>
        <input matInput formControlName="lastname">
        <mat-error *ngIf="form.get('lastname')?.hasError('required')">
          Los apellidos son obligatorios
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Especialidad</mat-label>
        <mat-select formControlName="specialization">
          <mat-option *ngFor="let s of specializations" [value]="s.value">
            {{ s.label }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="form.get('specialization')?.hasError('required')">
          La especialidad es obligatoria
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Correo de contacto</mat-label>
        <input matInput formControlName="mail" type="email">
        <mat-error *ngIf="form.get('mail')?.hasError('email')">
          Ingresa un correo válido
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Teléfono</mat-label>
        <input matInput formControlName="phone">
        <mat-error *ngIf="form.get('phone')?.hasError('required')">
          El teléfono es obligatorio
        </mat-error>
      </mat-form-field>

    </div>

    <div class="actions">
      <button mat-flat-button color="primary"
              class="btn-save"
              type="submit"
              [disabled]="form.invalid">
        Guardar cambios
      </button>
    </div>

  </form>
</div>

<ng-template #loadingTpl>
  <div class="loading">
    Cargando perfil profesional...
  </div>
</ng-template>
